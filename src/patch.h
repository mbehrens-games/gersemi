/*******************************************************************************
** patch.h (patch settings)
*******************************************************************************/

#ifndef PATCH_H
#define PATCH_H

#include "bank.h"

/* algorithm */
#define PATCH_ALGORITHM_LOWER_BOUND 1
#define PATCH_ALGORITHM_UPPER_BOUND 8
#define PATCH_ALGORITHM_NUM_VALUES  (PATCH_ALGORITHM_UPPER_BOUND - PATCH_ALGORITHM_LOWER_BOUND + 1)

/* oscillators */
#define PATCH_OSC_WAVEFORM_LOWER_BOUND  1
#define PATCH_OSC_WAVEFORM_UPPER_BOUND  8
#define PATCH_OSC_WAVEFORM_NUM_VALUES   (PATCH_OSC_WAVEFORM_UPPER_BOUND - PATCH_OSC_WAVEFORM_LOWER_BOUND + 1)

#define PATCH_OSC_FEEDBACK_LOWER_BOUND  0
#define PATCH_OSC_FEEDBACK_UPPER_BOUND  7
#define PATCH_OSC_FEEDBACK_NUM_VALUES   (PATCH_OSC_FEEDBACK_UPPER_BOUND - PATCH_OSC_FEEDBACK_LOWER_BOUND + 1)

#define PATCH_OSC_SYNC_LOWER_BOUND  0
#define PATCH_OSC_SYNC_UPPER_BOUND  4
#define PATCH_OSC_SYNC_NUM_VALUES   (PATCH_OSC_SYNC_UPPER_BOUND - PATCH_OSC_SYNC_LOWER_BOUND + 1)

#define PATCH_OSC_FREQ_MODE_LOWER_BOUND   0
#define PATCH_OSC_FREQ_MODE_UPPER_BOUND   1
#define PATCH_OSC_FREQ_MODE_NUM_VALUES    (PATCH_OSC_FREQ_MODE_UPPER_BOUND - PATCH_OSC_FREQ_MODE_LOWER_BOUND + 1)

#define PATCH_OSC_MULTIPLE_LOWER_BOUND  1
#define PATCH_OSC_MULTIPLE_UPPER_BOUND  16
#define PATCH_OSC_MULTIPLE_NUM_VALUES   (PATCH_OSC_MULTIPLE_UPPER_BOUND - PATCH_OSC_MULTIPLE_LOWER_BOUND + 1)

#define PATCH_OSC_DIVISOR_LOWER_BOUND   1
#define PATCH_OSC_DIVISOR_UPPER_BOUND   8
#define PATCH_OSC_DIVISOR_NUM_VALUES    (PATCH_OSC_DIVISOR_UPPER_BOUND - PATCH_OSC_DIVISOR_LOWER_BOUND + 1)

#define PATCH_OSC_NOTE_LOWER_BOUND    1
#define PATCH_OSC_NOTE_UPPER_BOUND    12
#define PATCH_OSC_NOTE_NUM_VALUES     (PATCH_OSC_NOTE_UPPER_BOUND - PATCH_OSC_NOTE_LOWER_BOUND + 1)

#define PATCH_OSC_OCTAVE_LOWER_BOUND -4
#define PATCH_OSC_OCTAVE_UPPER_BOUND  9
#define PATCH_OSC_OCTAVE_NUM_VALUES   (PATCH_OSC_OCTAVE_UPPER_BOUND - PATCH_OSC_OCTAVE_LOWER_BOUND + 1)

#define PATCH_OSC_DETUNE_LOWER_BOUND   -16
#define PATCH_OSC_DETUNE_UPPER_BOUND    16
#define PATCH_OSC_DETUNE_NUM_VALUES     (PATCH_OSC_DETUNE_UPPER_BOUND - PATCH_OSC_DETUNE_LOWER_BOUND + 1)

/* envelopes */
#define PATCH_ENV_RATE_LOWER_BOUND  1
#define PATCH_ENV_RATE_UPPER_BOUND  32
#define PATCH_ENV_RATE_NUM_VALUES   (PATCH_ENV_RATE_UPPER_BOUND - PATCH_ENV_RATE_LOWER_BOUND + 1)

#define PATCH_ENV_AMPLITUDE_LOWER_BOUND 0
#define PATCH_ENV_AMPLITUDE_UPPER_BOUND 32
#define PATCH_ENV_AMPLITUDE_NUM_VALUES  (PATCH_ENV_AMPLITUDE_UPPER_BOUND - PATCH_ENV_AMPLITUDE_LOWER_BOUND + 1)

#define PATCH_ENV_SUSTAIN_LOWER_BOUND   0
#define PATCH_ENV_SUSTAIN_UPPER_BOUND   16
#define PATCH_ENV_SUSTAIN_NUM_VALUES    (PATCH_ENV_SUSTAIN_UPPER_BOUND - PATCH_ENV_SUSTAIN_LOWER_BOUND + 1)

#define PATCH_ENV_KEYSCALE_LOWER_BOUND  1
#define PATCH_ENV_KEYSCALE_UPPER_BOUND  8
#define PATCH_ENV_KEYSCALE_NUM_VALUES   (PATCH_ENV_KEYSCALE_UPPER_BOUND - PATCH_ENV_KEYSCALE_LOWER_BOUND + 1)

#define PATCH_ENV_TRIGGER_LOWER_BOUND   1
#define PATCH_ENV_TRIGGER_UPPER_BOUND   8
#define PATCH_ENV_TRIGGER_NUM_VALUES    (PATCH_ENV_TRIGGER_UPPER_BOUND - PATCH_ENV_TRIGGER_LOWER_BOUND + 1)

/* lfo */
#define PATCH_LFO_WAVEFORM_LOWER_BOUND  1
#define PATCH_LFO_WAVEFORM_UPPER_BOUND  5
#define PATCH_LFO_WAVEFORM_NUM_VALUES   (PATCH_LFO_WAVEFORM_UPPER_BOUND - PATCH_LFO_WAVEFORM_LOWER_BOUND + 1)

#define PATCH_LFO_FREQUENCY_LOWER_BOUND  1
#define PATCH_LFO_FREQUENCY_UPPER_BOUND  32
#define PATCH_LFO_FREQUENCY_NUM_VALUES   (PATCH_LFO_FREQUENCY_UPPER_BOUND - PATCH_LFO_FREQUENCY_LOWER_BOUND + 1)

#define PATCH_LFO_DELAY_LOWER_BOUND 0
#define PATCH_LFO_DELAY_UPPER_BOUND 24
#define PATCH_LFO_DELAY_NUM_VALUES  (PATCH_LFO_DELAY_UPPER_BOUND - PATCH_LFO_DELAY_LOWER_BOUND + 1)

#define PATCH_LFO_VIBRATO_MODE_LOWER_BOUND  0
#define PATCH_LFO_VIBRATO_MODE_UPPER_BOUND  1
#define PATCH_LFO_VIBRATO_MODE_NUM_VALUES   (PATCH_LFO_VIBRATO_MODE_UPPER_BOUND - PATCH_LFO_VIBRATO_MODE_LOWER_BOUND + 1)

#define PATCH_LFO_SYNC_LOWER_BOUND  0
#define PATCH_LFO_SYNC_UPPER_BOUND  1
#define PATCH_LFO_SYNC_NUM_VALUES   (PATCH_LFO_SYNC_UPPER_BOUND - PATCH_LFO_SYNC_LOWER_BOUND + 1)

#define PATCH_LFO_TEMPO_LOWER_BOUND 0
#define PATCH_LFO_TEMPO_UPPER_BOUND 1
#define PATCH_LFO_TEMPO_NUM_VALUES  (PATCH_LFO_TEMPO_UPPER_BOUND - PATCH_LFO_TEMPO_LOWER_BOUND + 1)

/* sweep */
#define PATCH_PORTAMENTO_MODE_LOWER_BOUND   0
#define PATCH_PORTAMENTO_MODE_UPPER_BOUND   1
#define PATCH_PORTAMENTO_MODE_NUM_VALUES    (PATCH_PORTAMENTO_MODE_UPPER_BOUND - PATCH_PORTAMENTO_MODE_LOWER_BOUND + 1)

#define PATCH_PORTAMENTO_SPEED_LOWER_BOUND  1
#define PATCH_PORTAMENTO_SPEED_UPPER_BOUND  16
#define PATCH_PORTAMENTO_SPEED_NUM_VALUES   (PATCH_PORTAMENTO_SPEED_UPPER_BOUND - PATCH_PORTAMENTO_SPEED_LOWER_BOUND + 1)

/* filters */
#define PATCH_HIGHPASS_CUTOFF_LOWER_BOUND 0
#define PATCH_HIGHPASS_CUTOFF_UPPER_BOUND 3
#define PATCH_HIGHPASS_CUTOFF_NUM_VALUES  (PATCH_HIGHPASS_CUTOFF_UPPER_BOUND - PATCH_HIGHPASS_CUTOFF_LOWER_BOUND + 1)

#define PATCH_LOWPASS_CUTOFF_LOWER_BOUND  0
#define PATCH_LOWPASS_CUTOFF_UPPER_BOUND  3
#define PATCH_LOWPASS_CUTOFF_NUM_VALUES   (PATCH_LOWPASS_CUTOFF_UPPER_BOUND - PATCH_LOWPASS_CUTOFF_LOWER_BOUND + 1)

/* depths, mod wheel, and aftertouch */
#define PATCH_MOD_BASE_LOWER_BOUND  0
#define PATCH_MOD_BASE_UPPER_BOUND  16
#define PATCH_MOD_BASE_NUM_VALUES   (PATCH_MOD_BASE_UPPER_BOUND - PATCH_MOD_BASE_LOWER_BOUND + 1)

#define PATCH_MOD_DEPTH_LOWER_BOUND 1
#define PATCH_MOD_DEPTH_UPPER_BOUND 16
#define PATCH_MOD_DEPTH_NUM_VALUES  (PATCH_MOD_DEPTH_UPPER_BOUND - PATCH_MOD_DEPTH_LOWER_BOUND + 1)

#define PATCH_MOD_CONTROLLER_LOWER_BOUND  0
#define PATCH_MOD_CONTROLLER_UPPER_BOUND  16
#define PATCH_MOD_CONTROLLER_NUM_VALUES   (PATCH_MOD_CONTROLLER_UPPER_BOUND - PATCH_MOD_CONTROLLER_LOWER_BOUND + 1)

#define PATCH_MOD_ENABLE_LOWER_BOUND  0
#define PATCH_MOD_ENABLE_UPPER_BOUND  1
#define PATCH_MOD_ENABLE_NUM_VALUES   (PATCH_MOD_ENABLE_UPPER_BOUND - PATCH_MOD_ENABLE_LOWER_BOUND + 1)

typedef struct patch
{
  /* algorithm */
  short int algorithm;

  /* oscillators */
  short int osc_waveform[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int osc_feedback[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int osc_sync[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int osc_freq_mode[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int osc_multiple[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int osc_divisor[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int osc_note[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int osc_octave[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int osc_detune[BANK_OSCS_AND_ENVS_PER_VOICE];

  /* envelopes */
  short int env_attack[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int env_decay_1[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int env_decay_2[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int env_release[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int env_amplitude[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int env_sustain[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int env_rate_ks[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int env_level_ks[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int env_trigger[BANK_OSCS_AND_ENVS_PER_VOICE];

  /* lfo & eg bias enable */
  short int vibrato_enable[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int tremolo_enable[BANK_OSCS_AND_ENVS_PER_VOICE];
  short int boost_enable[BANK_OSCS_AND_ENVS_PER_VOICE];

  /* lfo */
  short int lfo_waveform;
  short int lfo_frequency;
  short int lfo_delay;
  short int lfo_sync;
  short int lfo_vibrato_mode;
  short int lfo_tempo;

  short int lfo_base_vibrato;
  short int lfo_base_tremolo;

  /* sweep */
  short int portamento_mode;
  short int portamento_speed;

  /* filters */
  short int highpass_cutoff;
  short int lowpass_cutoff;

  /* depths */
  short int vibrato_depth;
  short int tremolo_depth;
  short int boost_depth;

  /* mod wheel */
  short int mod_wheel_vibrato;
  short int mod_wheel_tremolo;
  short int mod_wheel_boost;

  /* aftertouch */
  short int aftertouch_vibrato;
  short int aftertouch_tremolo;
  short int aftertouch_boost;
} patch;

/* patch bank */
extern patch G_patch_bank[BANK_NUM_PATCHES];

/* function declarations */
short int patch_setup_all();
short int patch_reset(int patch_index);

#endif
