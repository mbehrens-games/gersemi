/*******************************************************************************
** layout.h (screen layout widget positions)
*******************************************************************************/

#ifndef LAYOUT_H
#define LAYOUT_H

enum
{
  LAYOUT_PANEL_TYPE_NORMAL = 0,
  LAYOUT_PANEL_TYPE_THIN
};

enum
{
  LAYOUT_BUTTON_LABEL_NONE = 0, 
  LAYOUT_BUTTON_LABEL_PATCHES, 
  LAYOUT_BUTTON_LABEL_PATTERNS 
};

enum
{
  LAYOUT_BUTTON_STATE_OFF = 0, 
  LAYOUT_BUTTON_STATE_ON 
};

enum
{
  LAYOUT_HEADER_TOP_PANEL_LABEL_NONE = 0, 
  LAYOUT_HEADER_TOP_PANEL_LABEL_NAME,
  LAYOUT_HEADER_TOP_PANEL_LABEL_VERSION
};

enum
{
  LAYOUT_HEADER_BOTTOM_PANEL_LABEL_NONE = 0, 
  LAYOUT_HEADER_BOTTOM_PANEL_LABEL_OCTAVE, 
  LAYOUT_HEADER_BOTTOM_PANEL_LABEL_KEY
};

enum
{
  LAYOUT_HEADER_PATCH_EDIT_LABEL_NONE = 0, 
  LAYOUT_HEADER_PATCH_EDIT_LABEL_OSC_1,
  LAYOUT_HEADER_PATCH_EDIT_LABEL_OSC_2, 
  LAYOUT_HEADER_PATCH_EDIT_LABEL_OSC_3, 
  LAYOUT_HEADER_PATCH_EDIT_LABEL_OSC_4, 
  LAYOUT_HEADER_PATCH_EDIT_LABEL_ENV_1, 
  LAYOUT_HEADER_PATCH_EDIT_LABEL_ENV_2, 
  LAYOUT_HEADER_PATCH_EDIT_LABEL_ENV_3, 
  LAYOUT_HEADER_PATCH_EDIT_LABEL_ENV_4, 
  LAYOUT_HEADER_PATCH_EDIT_NUM_LABELS
};

enum
{
  LAYOUT_PARAM_PATCH_EDIT_LABEL_ALGORITHM = 0, 
  LAYOUT_PARAM_PATCH_EDIT_LABEL_LOWPASS_CUTOFF, 
  LAYOUT_PARAM_PATCH_EDIT_LABEL_HIGHPASS_CUTOFF, 
  LAYOUT_PARAM_PATCH_EDIT_LABEL_OSC_FEEDBACK, 
  LAYOUT_PARAM_PATCH_EDIT_LABEL_OSC_MULTIPLE, 
  LAYOUT_PARAM_PATCH_EDIT_LABEL_OSC_DETUNE, 
  LAYOUT_PARAM_PATCH_EDIT_LABEL_OSC_AMPLITUDE, 
  LAYOUT_PARAM_PATCH_EDIT_LABEL_ENV_ATTACK, 
  LAYOUT_PARAM_PATCH_EDIT_LABEL_ENV_DECAY_1, 
  LAYOUT_PARAM_PATCH_EDIT_LABEL_ENV_DECAY_2, 
  LAYOUT_PARAM_PATCH_EDIT_LABEL_ENV_RELEASE, 
  LAYOUT_PARAM_PATCH_EDIT_LABEL_ENV_SUSTAIN, 
  LAYOUT_PARAM_PATCH_EDIT_LABEL_ENV_RATE_KS, 
  LAYOUT_PARAM_PATCH_EDIT_LABEL_ENV_LEVEL_KS, 
  LAYOUT_PARAM_PATCH_EDIT_NUM_LABELS
};

#define LAYOUT_PARAM_PATCH_EDIT_NUM_OSC_ENV_LABELS  (LAYOUT_PARAM_PATCH_EDIT_LABEL_ENV_LEVEL_KS - LAYOUT_PARAM_PATCH_EDIT_LABEL_OSC_FEEDBACK + 1)
#define LAYOUT_PARAM_PATCH_EDIT_NUM_OTHER_LABELS    (LAYOUT_PARAM_PATCH_EDIT_NUM_LABELS - LAYOUT_PARAM_PATCH_EDIT_NUM_OSC_ENV_LABELS)

/* panels */
#define LAYOUT_NUM_PANELS 2

#define LAYOUT_PANEL_INDEX_IS_VALID(index)                                     \
  ((index >= 0) && (index < LAYOUT_NUM_PANELS))

#define LAYOUT_PANEL_INDEX_IS_NOT_VALID(index)                                 \
  (!(LAYOUT_PANEL_INDEX_IS_VALID(index)))

/* buttons */
#define LAYOUT_NUM_TOP_PANEL_BUTTONS  2
#define LAYOUT_NUM_PATCHES_BUTTONS    0

#define LAYOUT_NUM_BUTTONS    ( LAYOUT_NUM_TOP_PANEL_BUTTONS +                 \
                                LAYOUT_NUM_PATCHES_BUTTONS)

#define LAYOUT_TOP_PANEL_BUTTONS_START_INDEX   0
#define LAYOUT_TOP_PANEL_BUTTONS_END_INDEX     (LAYOUT_TOP_PANEL_BUTTONS_START_INDEX + \
                                                LAYOUT_NUM_TOP_PANEL_BUTTONS)

#define LAYOUT_PATCHES_BUTTONS_START_INDEX   LAYOUT_TOP_PANEL_BUTTONS_END_INDEX
#define LAYOUT_PATCHES_BUTTONS_END_INDEX     (LAYOUT_PATCHES_BUTTONS_START_INDEX + \
                                              LAYOUT_NUM_PATCHES_BUTTONS)

#define LAYOUT_BUTTON_INDEX_IS_VALID(index)                                    \
  ((index >= 0) && (index < LAYOUT_NUM_BUTTONS))

#define LAYOUT_BUTTON_INDEX_IS_NOT_VALID(index)                                \
  (!(LAYOUT_BUTTON_INDEX_IS_VALID(index)))

/* headers */
#define LAYOUT_NUM_TOP_PANEL_HEADERS    2
#define LAYOUT_NUM_BOTTOM_PANEL_HEADERS 2
#define LAYOUT_NUM_PATCH_EDIT_HEADERS   8

#define LAYOUT_NUM_HEADERS    ( LAYOUT_NUM_TOP_PANEL_HEADERS +                 \
                                LAYOUT_NUM_BOTTOM_PANEL_HEADERS +              \
                                LAYOUT_NUM_PATCH_EDIT_HEADERS)

#define LAYOUT_TOP_PANEL_HEADERS_START_INDEX   0
#define LAYOUT_TOP_PANEL_HEADERS_END_INDEX     (LAYOUT_TOP_PANEL_HEADERS_START_INDEX + \
                                                LAYOUT_NUM_TOP_PANEL_HEADERS)

#define LAYOUT_BOTTOM_PANEL_HEADERS_START_INDEX   LAYOUT_TOP_PANEL_HEADERS_END_INDEX
#define LAYOUT_BOTTOM_PANEL_HEADERS_END_INDEX     ( LAYOUT_BOTTOM_PANEL_HEADERS_START_INDEX + \
                                                    LAYOUT_NUM_BOTTOM_PANEL_HEADERS)

#define LAYOUT_PATCH_EDIT_HEADERS_START_INDEX   LAYOUT_BOTTOM_PANEL_HEADERS_END_INDEX
#define LAYOUT_PATCH_EDIT_HEADERS_END_INDEX     ( LAYOUT_PATCH_EDIT_HEADERS_START_INDEX + \
                                                  LAYOUT_NUM_PATCH_EDIT_HEADERS)

#define LAYOUT_HEADER_INDEX_IS_VALID(index)                                    \
  ((index >= 0) && (index < LAYOUT_NUM_HEADERS))

#define LAYOUT_HEADER_INDEX_IS_NOT_VALID(index)                                \
  (!(LAYOUT_HEADER_INDEX_IS_VALID(index)))

/* params */
#define LAYOUT_NUM_BOTTOM_PANEL_PARAMS 0
#define LAYOUT_NUM_PATCH_EDIT_PARAMS   (LAYOUT_PARAM_PATCH_EDIT_NUM_OTHER_LABELS + (4 * LAYOUT_PARAM_PATCH_EDIT_NUM_OSC_ENV_LABELS))

#define LAYOUT_NUM_PARAMS    (LAYOUT_NUM_BOTTOM_PANEL_PARAMS +                 \
                              LAYOUT_NUM_PATCH_EDIT_PARAMS)

#define LAYOUT_BOTTOM_PANEL_PARAMS_START_INDEX  0
#define LAYOUT_BOTTOM_PANEL_PARAMS_END_INDEX    ( LAYOUT_BOTTOM_PANEL_PARAMS_START_INDEX + \
                                                  LAYOUT_NUM_BOTTOM_PANEL_PARAMS)

#define LAYOUT_PATCH_EDIT_PARAMS_START_INDEX  LAYOUT_BOTTOM_PANEL_PARAMS_END_INDEX
#define LAYOUT_PATCH_EDIT_PARAMS_END_INDEX    ( LAYOUT_PATCH_EDIT_PARAMS_START_INDEX + \
                                                LAYOUT_NUM_PATCH_EDIT_PARAMS)

#define LAYOUT_PARAM_INDEX_IS_VALID(index)                                     \
  ((index >= 0) && (index < LAYOUT_NUM_PARAMS))

#define LAYOUT_PARAM_INDEX_IS_NOT_VALID(index)                                 \
  (!(LAYOUT_PARAM_INDEX_IS_VALID(index)))

/* panel positions & sizes */
#define LAYOUT_PANEL_TOP_X           0
#define LAYOUT_PANEL_TOP_Y         -22
#define LAYOUT_PANEL_TOP_WIDTH      50
#define LAYOUT_PANEL_TOP_HEIGHT      6

#define LAYOUT_PANEL_BOTTOM_X        0
#define LAYOUT_PANEL_BOTTOM_Y       25
#define LAYOUT_PANEL_BOTTOM_WIDTH   50
#define LAYOUT_PANEL_BOTTOM_HEIGHT   3

/* button positions & sizes (top & bottom panels) */
#define LAYOUT_TOP_PANEL_BUTTON_PATCHES_X       -40
#define LAYOUT_TOP_PANEL_BUTTON_PATCHES_Y       -20
#define LAYOUT_TOP_PANEL_BUTTON_PATCHES_WIDTH     8

#define LAYOUT_TOP_PANEL_BUTTON_PATTERNS_X      -22
#define LAYOUT_TOP_PANEL_BUTTON_PATTERNS_Y      -20
#define LAYOUT_TOP_PANEL_BUTTON_PATTERNS_WIDTH   10

/* header positions (top & bottom panels) */
#define LAYOUT_TOP_PANEL_HEADER_NAME_X       -5
#define LAYOUT_TOP_PANEL_HEADER_NAME_Y      -24

#define LAYOUT_TOP_PANEL_HEADER_VERSION_X     9
#define LAYOUT_TOP_PANEL_HEADER_VERSION_Y   -24

#define LAYOUT_BOTTOM_PANEL_HEADER_OCTAVE_X -42
#define LAYOUT_BOTTOM_PANEL_HEADER_OCTAVE_Y  25

#define LAYOUT_BOTTOM_PANEL_HEADER_KEY_X      2
#define LAYOUT_BOTTOM_PANEL_HEADER_KEY_Y     25

/* screen regions (divided vertically) */
#define LAYOUT_SCREEN_AREA_TOP_PANEL_LOWER_BOUND_CELLS     0
#define LAYOUT_SCREEN_AREA_TOP_PANEL_UPPER_BOUND_CELLS     LAYOUT_PANEL_TOP_HEIGHT

#define LAYOUT_SCREEN_AREA_BOTTOM_PANEL_LOWER_BOUND_CELLS  (28 - LAYOUT_PANEL_BOTTOM_HEIGHT)
#define LAYOUT_SCREEN_AREA_BOTTOM_PANEL_UPPER_BOUND_CELLS  28

#define LAYOUT_SCREEN_AREA_MAIN_LOWER_BOUND_CELLS  LAYOUT_PANEL_TOP_HEIGHT
#define LAYOUT_SCREEN_AREA_MAIN_UPPER_BOUND_CELLS  (28 - LAYOUT_PANEL_BOTTOM_HEIGHT)

#define LAYOUT_SCREEN_AREA_TOP_PANEL_LOWER_BOUND_PIXELS     (8 * LAYOUT_SCREEN_AREA_TOP_PANEL_LOWER_BOUND_CELLS)
#define LAYOUT_SCREEN_AREA_TOP_PANEL_UPPER_BOUND_PIXELS     (8 * LAYOUT_SCREEN_AREA_TOP_PANEL_UPPER_BOUND_CELLS)

#define LAYOUT_SCREEN_AREA_BOTTOM_PANEL_LOWER_BOUND_PIXELS  (8 * LAYOUT_SCREEN_AREA_BOTTOM_PANEL_LOWER_BOUND_CELLS)
#define LAYOUT_SCREEN_AREA_BOTTOM_PANEL_UPPER_BOUND_PIXELS  (8 * LAYOUT_SCREEN_AREA_BOTTOM_PANEL_UPPER_BOUND_CELLS)

#define LAYOUT_SCREEN_AREA_MAIN_LOWER_BOUND_PIXELS  (8 * LAYOUT_SCREEN_AREA_MAIN_LOWER_BOUND_CELLS)
#define LAYOUT_SCREEN_AREA_MAIN_UPPER_BOUND_PIXELS  (8 * LAYOUT_SCREEN_AREA_MAIN_UPPER_BOUND_CELLS)

#define LAYOUT_PATCH_HEADER_IS_IN_MAIN_AREA(hd)                                                                                                     \
  ( ((GRAPHICS_OVERSCAN_HEIGHT - 8 * 1) / 2 + (4 * (hd->center_y - G_current_scroll_amount)) >= LAYOUT_SCREEN_AREA_MAIN_LOWER_BOUND_PIXELS + 4) &&  \
    ((GRAPHICS_OVERSCAN_HEIGHT + 8 * 1) / 2 + (4 * (hd->center_y - G_current_scroll_amount)) <= LAYOUT_SCREEN_AREA_MAIN_UPPER_BOUND_PIXELS - 4))

#define LAYOUT_PATCH_HEADER_IS_NOT_IN_MAIN_AREA(hd)                             \
  (!(LAYOUT_PATCH_HEADER_IS_IN_MAIN_AREA(hd)))

#define LAYOUT_PATCH_PARAM_IS_IN_MAIN_AREA(pr)                                                                                                      \
  ( ((GRAPHICS_OVERSCAN_HEIGHT - 8 * 1) / 2 + (4 * (pr->center_y - G_current_scroll_amount)) >= LAYOUT_SCREEN_AREA_MAIN_LOWER_BOUND_PIXELS + 4) &&  \
    ((GRAPHICS_OVERSCAN_HEIGHT + 8 * 1) / 2 + (4 * (pr->center_y - G_current_scroll_amount)) <= LAYOUT_SCREEN_AREA_MAIN_UPPER_BOUND_PIXELS - 4))

#define LAYOUT_PATCH_PARAM_IS_NOT_IN_MAIN_AREA(pr)                              \
  (!(LAYOUT_PATCH_PARAM_IS_IN_MAIN_AREA(pr)))

#define LAYOUT_PATCH_EDIT_MAX_SCROLL_AMOUNT   15

/* patch edit headers & adjustable parameters */
#define LAYOUT_PATCH_EDIT_PATCH_NUMBER_X     -47
#define LAYOUT_PATCH_EDIT_PATCH_NUMBER_Y     -13

#define LAYOUT_PATCH_EDIT_ALGORITHM_Y         -9
#define LAYOUT_PATCH_EDIT_FILTER_CUTOFF_Y     -9

#define LAYOUT_PATCH_EDIT_COLUMN_1_CENTER_X  -37
#define LAYOUT_PATCH_EDIT_COLUMN_2_CENTER_X  -13
#define LAYOUT_PATCH_EDIT_COLUMN_3_CENTER_X   11
#define LAYOUT_PATCH_EDIT_COLUMN_4_CENTER_X   35

#define LAYOUT_PATCH_EDIT_HEADER_OSC_Y        -5
#define LAYOUT_PATCH_EDIT_OSC_FEEDBACK_Y      -1
#define LAYOUT_PATCH_EDIT_OSC_MULTIPLE_Y       2
#define LAYOUT_PATCH_EDIT_OSC_DETUNE_Y         5
#define LAYOUT_PATCH_EDIT_OSC_AMPLITUDE_Y      8

#define LAYOUT_PATCH_EDIT_HEADER_ENV_Y        12
#define LAYOUT_PATCH_EDIT_ENV_ATTACK_Y        16
#define LAYOUT_PATCH_EDIT_ENV_DECAY_1_Y       19
#define LAYOUT_PATCH_EDIT_ENV_DECAY_2_Y       22
#define LAYOUT_PATCH_EDIT_ENV_RELEASE_Y       25
#define LAYOUT_PATCH_EDIT_ENV_SUSTAIN_Y       28
#define LAYOUT_PATCH_EDIT_ENV_RATE_KS_Y       31
#define LAYOUT_PATCH_EDIT_ENV_LEVEL_KS_Y      34

#define LAYOUT_PATCH_EDIT_PARAM_NAME_X        -8
#define LAYOUT_PATCH_EDIT_PARAM_VALUE_X       -2
#define LAYOUT_PATCH_EDIT_PARAM_SLIDER_X       6
#define LAYOUT_PATCH_EDIT_PARAM_ADJUST_L_X     1
#define LAYOUT_PATCH_EDIT_PARAM_ADJUST_R_X    11

#define LAYOUT_PATCH_EDIT_PARAM_SLIDER_WIDTH   5

typedef struct panel
{
  int type;

  int center_x;
  int center_y;

  int width;
  int height;
} panel;

typedef struct button
{
  int label;

  int center_x;
  int center_y;

  int width;
  int state;
} button;

typedef struct header
{
  int label;

  int center_x;
  int center_y;
} header;

typedef struct param
{
  int label;
  int num;

  int center_x;
  int center_y;

  short int lower_bound;
  short int upper_bound;
} param;

extern panel  G_layout_panels[LAYOUT_NUM_PANELS];
extern button G_layout_buttons[LAYOUT_NUM_BUTTONS];

extern header G_layout_headers[LAYOUT_NUM_HEADERS];
extern param  G_layout_params[LAYOUT_NUM_PARAMS];

/* function declarations */
short int layout_setup_all();

short int layout_reset_top_panel_button_states();

#endif
